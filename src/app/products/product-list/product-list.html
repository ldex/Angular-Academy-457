<h2>
    {{ title() }}
</h2>

@if (error(); as message) {
    <div class="errorMessage">{{ message }}</div>
} @else if (isLoading()) {
    <div class="loading"></div>
} @else {
    <div>{{ products().length }} products</div>
    <ul class="products">
        @for (product of products() | slice:start():end(); track product.id) {
            <li (click)="selectProduct(product)"
                [class.discontinued]="product.discontinued"
                [class.selected]="product == selectedProduct()">
                <span class="name">{{ product.name | uppercase }}</span>
                <span class="description">{{ product.description }}</span>
                <span class="price">{{ product.price | currency:'CAD':'symbol':'.2' }}</span>
            </li>
        }
    </ul>

    <div class="right">
        <a routerLink="create">Add new product...</a>
    </div>

    <div>
        <button [disabled]="start() == 0" (click)="changePage(-1)">Previous Page</button>
        page {{ pageNumber() }}
        <button [disabled]="products().length <= end()" (click)="changePage(1)">Next Page</button>
    </div>

    <app-product-details [product]="selectedProduct()"></app-product-details>
}

